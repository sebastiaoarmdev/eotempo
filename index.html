<!DOCTYPE html>
<html lang="pt-br">
<head>
	<meta charset="utf-8">
	<title>E o tempo?</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="E o tempo?">
	<style>
	body {
		font-family: monospace;
	}
	pre {
		outline: 1px solid #ccc; 
		padding: 5px; 
		margin: 5px;
	}
	.string {
		color: green;
	}
	.number { 
		color: darkorange; 
	}
	.boolean { 
		color: blue; 
	}
	.null { 
		color: magenta;
	}
	.key { 
		color: red; 
	}
	</style>
</head>
<body>
	<div id="data"></div>
	<script>
		'use strict';

		const apiurl = 'https://api.hgbrasil.com/weather?format=json-cors&key=38c0fb37&user_ip=remote';	

		function syntaxHighlight(json) {
			if (typeof json != 'string') {
				json = JSON.stringify(json, undefined, 2);
			}
			json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
			return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
				let $class = 'number';
				if (/^"/.test(match)) {
					if (/:$/.test(match)) {
						$class = 'key';
					} else {
						$class = 'string';
					}
				} else if (/true|false/.test(match)) {
					$class = 'boolean';
				} else if (/null/.test(match)) {
					$class = 'null';
				}
				return '<span class="' + $class + '">' + match + '</span>';
			});
		}
		
		async function getData(url) {
			const response = await fetch(url);
			const data = await response.json();
			return data;
		}

		async function showData() {
			try {
				const data = await getData(apiurl);
				console.log(data);
				document.getElementById('data').innerHTML = syntaxHighlight(JSON.stringify(data, undefined, 4));
			} catch (error) {
				console.error("Error!", error.message);
			}
		}

		showData();
	</script>
</body>
</html>
